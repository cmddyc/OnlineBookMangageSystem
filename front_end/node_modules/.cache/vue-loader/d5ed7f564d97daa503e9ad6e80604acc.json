{"remainingRequest":"D:\\Spirited\\G3\\软件工程\\BookManage-1.0.0\\front_end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Spirited\\G3\\软件工程\\BookManage-1.0.0\\front_end\\src\\views\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Spirited\\G3\\软件工程\\BookManage-1.0.0\\front_end\\src\\views\\Login.vue","mtime":1672322906956},{"path":"D:\\Spirited\\G3\\软件工程\\BookManage-1.0.0\\front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1669884633585},{"path":"D:\\Spirited\\G3\\软件工程\\BookManage-1.0.0\\front_end\\node_modules\\babel-loader\\lib\\index.js","mtime":1669884625099},{"path":"D:\\Spirited\\G3\\软件工程\\BookManage-1.0.0\\front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1669884633585},{"path":"D:\\Spirited\\G3\\软件工程\\BookManage-1.0.0\\front_end\\node_modules\\vue-loader\\lib\\index.js","mtime":1669884623589}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAnYW5pbWF0ZS5jc3MnCmltcG9ydCB7CiAgbWFwU3RhdGUsCiAgbWFwTXV0YXRpb25zLAogIG1hcEdldHRlcnMsCiAgbWFwQWN0aW9ucwp9IGZyb20gJ3Z1ZXgnCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy8g55m75b2V6KGo5Y2V55qE5pWw5o2u57uR5a6a5a+56LGhCiAgICAgIGxvZ2luRGF0YTogewogICAgICAgIG1haWxfbnVtOiAnJywKICAgICAgICBwYXNzd29yZDogJycKICAgICAgfSwKICAgICAgLy8g5rOo5YaM6KGo5Y2V6aqM6K+B5a+56LGhCiAgICAgIHJlZ2lzdGVyRGF0YTogewogICAgICAgIHN0dV9pZDogJycsCiAgICAgICAgbmFtZTogJycsCiAgICAgICAgbWFpbF9udW06ICcnLAogICAgICAgIHZhbGk6ICcnLAogICAgICAgIHBhc3N3b3JkOiAnJwogICAgICB9LAogICAgICAvLyDnlKjmiLflvZPliY3mmK/lkKbmraPlh4blpIfnmbvlvZUKICAgICAgaXNPbkxvZ2luOiB0cnVlLAogICAgICAvLyDnlKjmiLflvZPliY3mmK/lkKblt7Lnu4/mi7/liLDpqozor4HnoIEKICAgICAgaXNHZXRWYWxpZGF0ZTogZmFsc2UsCiAgICAgIC8vIOmYsuatoueUqOaIt+mikee5geivt+axgumqjOivgQogICAgICBpc0ZyZXFWYWxpZGF0ZTogZmFsc2UsCiAgICAgIC8vIOeZu+W9leihqOWNlemqjOivgeinhOWImeWvueixoQogICAgICBsb2dpbkZvcm1SdWxlczogewogICAgICAgIG1haWxfbnVtOiBbewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpemCrueuseWcsOWdgCcsCiAgICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgbWluOiA4LAogICAgICAgICAgICBtZXNzYWdlOiAn6YKu566x5Zyw5Z2A6ZW/5bqm5LiN5ZCI5rOVJywKICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgICB9CiAgICAgICAgXSwKICAgICAgICBwYXNzd29yZDogW3sKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXlr4bnoIEnLAogICAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG1pbjogNSwKICAgICAgICAgICAgbWF4OiAxNSwKICAgICAgICAgICAgbWVzc2FnZTogJ+WvhueggemVv+W6puS4jeWQiOazlScsCiAgICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgICAgfQogICAgICAgIF0KICAgICAgfSwKICAgICAgLy8g5rOo5YaM6KGo5Y2V6aqM6K+B6KeE5YiZ5a+56LGhCiAgICAgIHJlZ2lzdGVyRm9ybVJ1bGVzOiB7CiAgICAgICAgc3R1X2lkOiBbewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeaCqOeahOWtpuWPtycsCiAgICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgbWluOiA3LAogICAgICAgICAgICBtYXg6IDksCiAgICAgICAgICAgIG1lc3NhZ2U6ICflrablj7fplb/luqbkuI3lkIjms5UnLAogICAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICAgIH0KICAgICAgICBdLAogICAgICAgIG5hbWU6IFt7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5L2g55qE5pi156ewJywKICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBtaW46IDAsCiAgICAgICAgICAgIG1heDogMjAsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfmmLXnp7Dplb/luqbkuI3lkIjms5UnLAogICAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICAgIH0KICAgICAgICBdLAogICAgICAgIG1haWxfbnVtOiBbewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpemCrueuseWcsOWdgCcsCiAgICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgbWluOiA4LAogICAgICAgICAgICBtZXNzYWdlOiAn6YKu566x5Zyw5Z2A5LiN5ZCI5rOVJywKICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgICB9CiAgICAgICAgXSwKICAgICAgICB2YWxpOiBbewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpemqjOivgeeggScsCiAgICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgbWluOiAzLAogICAgICAgICAgICBtZXNzYWdlOiAn6aqM6K+B56CB5LiN5ZCI5rOVJywKICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgICB9CiAgICAgICAgXSwKICAgICAgICBwYXNzd29yZDogW3sKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXlr4bnoIEnLAogICAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG1pbjogNSwKICAgICAgICAgICAgbWF4OiAxNSwKICAgICAgICAgICAgbWVzc2FnZTogJ+WvhueggemVv+W6puS4jeWQiOazlScsCiAgICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgICAgfQogICAgICAgIF0KICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLi4ubWFwTXV0YXRpb25zKCd1c2VyQWJvdXQnLCB7CiAgICAgIHNhdmVJbmZvOiAnU0FWRScKICAgIH0pLAogICAgLy8g55So5oi355m75b2VCiAgICBsb2dpbigpIHsKICAgICAgbGV0IHN1Ym1pdCA9IHsKICAgICAgICAidXNlciI6IHsKICAgICAgICAgICJtYWlsX251bSI6IHRoaXMubG9naW5EYXRhLm1haWxfbnVtLAogICAgICAgICAgInBhc3N3b3JkIjogdGhpcy5sb2dpbkRhdGEucGFzc3dvcmQKICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy4kcmVmcy5sb2dpbkZvclJlZi52YWxpZGF0ZShhc3luYyB2YWxpZCA9PiB7CiAgICAgICAgaWYgKCF2YWxpZCkgcmV0dXJuCiAgICAgICAgYXdhaXQgdGhpcy4kaHR0cC5wb3N0KHRoaXMuYmFzZVVybCsnL3VzZXJsb2dpbicsIHN1Ym1pdCkudGhlbihyZXMgPT4gewogICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHJlcy5kYXRhLnRva2VuKQogICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdpZCcsIHJlcy5kYXRhLmlkKQogICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCduYW1lJywgcmVzLmRhdGEubmFtZSkKICAgICAgICAgIHRoaXMuc2F2ZUluZm8oKQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHsKICAgICAgICAgICAgbWVzc2FnZTogJ+eZu+W9leaIkOWKnycsCiAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAwCiAgICAgICAgICB9KQogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9ob21lJykKICAgICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHsKICAgICAgICAgICAgICBtZXNzYWdlOiAn55m75b2V5aSx6LSlJywKICAgICAgICAgICAgICBkdXJhdGlvbjogMTUwMAogICAgICAgICAgICB9KQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0pCiAgICB9LAogICAgc3dpdGNoU3RhdHVzKCkgewogICAgICAvLyDliIfmjaLnlYzpnaIKICAgICAgdGhpcy5pc09uTG9naW4gPSAhdGhpcy5pc09uTG9naW4KICAgIH0sCiAgICAvLyDnlKjmiLfms6jlhozlubbmj5DkuqTpqozor4HnoIEKICAgIGFzeW5jIHJlZ2lzdGVyKCkgewogICAgICBsZXQga2V5ID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdfb25lX2tleScpCiAgICAgIGxldCBzdWJtaXQgPSB7CiAgICAgICAgInVzZXIiOiB7CiAgICAgICAgICAibmFtZSI6IHRoaXMucmVnaXN0ZXJEYXRhLm5hbWUsCiAgICAgICAgICAicGFzc3dvcmQiOiB0aGlzLnJlZ2lzdGVyRGF0YS5wYXNzd29yZCwKICAgICAgICAgICJtYWlsX251bSI6IHRoaXMucmVnaXN0ZXJEYXRhLm1haWxfbnVtLAogICAgICAgICAgInZhbGkiOiB0aGlzLnJlZ2lzdGVyRGF0YS52YWxpLAogICAgICAgICAga2V5LAogICAgICAgICAgInN0dV9pZCI6IHRoaXMucmVnaXN0ZXJEYXRhLnN0dV9pZAogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLiRyZWZzLnJlZ2lzdGVyRm9yUmVmLnZhbGlkYXRlKGFzeW5jIHZhbGlkID0+IHsKICAgICAgICBpZiAoIXZhbGlkKSB7CiAgICAgICAgICByZXR1cm4KICAgICAgICB9CiAgICAgICAgYXdhaXQgdGhpcy4kaHR0cC5wb3N0KHRoaXMuYmFzZVVybCsnL3VzZXJyZWdpc3RlcicsIHN1Ym1pdCkudGhlbihyZXMgPT4gewogICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHJlcy5kYXRhLnRva2VuKQogICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdpZCcsIHJlcy5kYXRhLmlkKQogICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCduYW1lJywgdGhpcy5yZWdpc3RlckRhdGEubmFtZSkKICAgICAgICAgIHRoaXMuc2F2ZUluZm8oKQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHsKICAgICAgICAgICAgbWVzc2FnZTogJ+azqOWGjOaIkOWKnycsCiAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAwCiAgICAgICAgICB9KQogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9ob21lJykKICAgICAgICB9KS5jYXRjaCgoZXJyLCBhKSA9PiB7CiAgICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoewogICAgICAgICAgICAgIG1lc3NhZ2U6ICfms6jlhozlpLHotKUnLAogICAgICAgICAgICAgIGR1cmF0aW9uOiAxNTAwCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfSkKICAgIH0sCiAgICAvLyDojrflj5bpqozor4HnoIEKICAgIGFzeW5jIGdldFZhbGlkYXRlKCkgewogICAgICB0aGlzLiRyZWZzLnJlZ2lzdGVyRm9yUmVmLnZhbGlkYXRlRmllbGQoJ21haWxfbnVtJywgYXN5bmMgdmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkKICAgICAgICAgIHJldHVybgogICAgICAgIHRoaXMuaXNGcmVxVmFsaWRhdGUgPSAhdGhpcy5pc0ZyZXFWYWxpZGF0ZQogICAgICAgIC8vIDIwc+WQjuWFgeiuuOWGjeasoeivt+axggogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgdGhpcy5pc0ZyZXFWYWxpZGF0ZSA9ICF0aGlzLmlzRnJlcVZhbGlkYXRlCiAgICAgICAgfSwgMTAwMCAqIDIwKQogICAgICAgIC8vIOiOt+WPluaXtumXtOaIs+adpeS4uuacjeWKoeWZqOagh+ivhuacrOasoemqjOivgeeggeeahOivt+axguaXtumXtAogICAgICAgIGxldCB0aW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgICBtYWlsOiB0aGlzLnJlZ2lzdGVyRGF0YS5tYWlsX251bSwKICAgICAgICAgIHRpbWVzdGFtcDogdGltZQogICAgICAgIH0KICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLiRodHRwLnBvc3QodGhpcy5iYXNlVXJsKycvdmFsaWRhdGVNYWlsJywgZGF0YSkKICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLmlzR2V0VmFsaWRhdGUgPSB0cnVlCiAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ19vbmVfa2V5JywgcmVzLmRhdGEpCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmluZm8oewogICAgICAgICAgICBtZXNzYWdlOiAn6aqM6K+B56CB5Y+R6YCB5oiQ5YqfJywKICAgICAgICAgICAgZHVyYXRpb246IDIwMDAKICAgICAgICAgIH0pCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoewogICAgICAgICAgICBtZXNzYWdlOiAn6aqM6K+B56CB5Y+R6YCB5aSx6LSlJywKICAgICAgICAgICAgZHVyYXRpb246IDIwMDAKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9KQogICAgfQogIH0KfQo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"login_container\">\r\n    <transition-group appear name=\"animate__animated animated__bounce \" enter-active-class=\"animate__fadeIn\"\r\n      leave-active-class=\"animate__fadeOutDown\">\r\n      <div class=\"login_box\" key=\"1\" v-if=\"isOnLogin\">\r\n        <div class=\"form\">\r\n          <span>图书管理系统</span>\r\n          <el-form @submit.prevent='' ref='loginForRef' :model=\"loginData\" :rules=\"loginFormRules\" label-width>\r\n            <el-form-item prop=\"mail_num\">\r\n              <el-input @keydown.enter.native=\"login\" placeholder=\"邮箱地址\" v-model.trim=\"loginData.mail_num\"\r\n                prefix-icon=\"el-icon-user-solid\">\r\n              </el-input>\r\n            </el-form-item>\r\n            <el-form-item prop=\"password\">\r\n              <el-input @keydown.enter.native=\"login\" placeholder=\"密码\" v-model.trim=\"loginData.password\" type=\"password\"\r\n                prefix-icon=\"el-icon-s-promotion\">\r\n              </el-input>\r\n            </el-form-item>\r\n            <el-form-item class=\"btns\">\r\n              <el-button :round=\"false\" :circle=\"false\" type=\"primary\" size=\"medium\" @click=\"login\">登录<i\r\n                  class=\"el-icon-upload el-icon--right\"></i></el-button>\r\n            </el-form-item>\r\n            <el-link class=\"link\" target=\"_blank\" @click=\"switchStatus\">还没有账户？点击注册</el-link>\r\n          </el-form>\r\n        </div>\r\n      </div>\r\n    </transition-group>\r\n    <div class=\"register_box\" v-if=\"!isOnLogin\">\r\n      <span>新用户注册</span>\r\n      <el-form @submit.prevent='' ref='registerForRef' :model=\"registerData\" :rules=\"registerFormRules\" label-width>\r\n        <el-form-item prop=\"stu_id\">\r\n          <el-input placeholder=\"id\" v-model.trim=\"registerData.stu_id\" prefix-icon=\"el-icon-user-solid\">\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"name\">\r\n          <el-input placeholder=\"昵称\" v-model.trim=\"registerData.name\" prefix-icon=\"el-icon-s-promotion\">\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"password\">\r\n          <el-input show-password placeholder=\"密码\" type=\"password\" v-model.trim=\"registerData.password\"\r\n            prefix-icon=\"el-icon-s-promotion\">\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"mail_num\">\r\n          <el-input placeholder=\"邮箱地址\" v-model.trim=\"registerData.mail_num\" prefix-icon=\"el-icon-s-promotion\">\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"vali\">\r\n          <el-input :disabled=\"!isGetValidate\" placeholder=\"\" v-model.trim=\"registerData.vali\"\r\n            prefix-icon=\"el-icon-s-promotion\">\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item class=\"btns\">\r\n          <el-button v-if=\"registerData.mail_num\" :disabled=\"isFreqValidate\" :round=\"false\" :circle=\"false\"\r\n            type=\"primary\" size=\"medium\" @click=\"getValidate\" style=\"float:left;\">\r\n            获取验证码<i class=\"el-icon-magic-stick el-icon--right\"></i></el-button>\r\n          <el-button :disabled=\"!registerData.vali\" v-if=\"isGetValidate&&registerData.mail_num\" :round=\"false\"\r\n            :circle=\"false\" type=\"primary\" size=\"medium\" @click=\"register\" style=\"float:right\">\r\n            确认注册 <i class=\"el-icon-key el-icon--right\"></i></el-button>\r\n            <el-button type=\"primary\" plain @click=\"\">注册</el-button>\r\n        </el-form-item>\r\n        <el-link class=\"link\" style=\"\" target=\"_blank\" @click=\"switchStatus\">已有账户？ 点击登录</el-link>\r\n      </el-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import 'animate.css'\r\n  import {\r\n    mapState,\r\n    mapMutations,\r\n    mapGetters,\r\n    mapActions\r\n  } from 'vuex'\r\n  export default {\r\n    data() {\r\n      return {\r\n        // 登录表单的数据绑定对象\r\n        loginData: {\r\n          mail_num: '',\r\n          password: ''\r\n        },\r\n        // 注册表单验证对象\r\n        registerData: {\r\n          stu_id: '',\r\n          name: '',\r\n          mail_num: '',\r\n          vali: '',\r\n          password: ''\r\n        },\r\n        // 用户当前是否正准备登录\r\n        isOnLogin: true,\r\n        // 用户当前是否已经拿到验证码\r\n        isGetValidate: false,\r\n        // 防止用户频繁请求验证\r\n        isFreqValidate: false,\r\n        // 登录表单验证规则对象\r\n        loginFormRules: {\r\n          mail_num: [{\r\n              required: true,\r\n              message: '请输入邮箱地址',\r\n              trigger: 'blur'\r\n            },\r\n            {\r\n              min: 8,\r\n              message: '邮箱地址长度不合法',\r\n              trigger: 'blur'\r\n            }\r\n          ],\r\n          password: [{\r\n              required: true,\r\n              message: '请输入密码',\r\n              trigger: 'blur'\r\n            },\r\n            {\r\n              min: 5,\r\n              max: 15,\r\n              message: '密码长度不合法',\r\n              trigger: 'blur'\r\n            }\r\n          ]\r\n        },\r\n        // 注册表单验证规则对象\r\n        registerFormRules: {\r\n          stu_id: [{\r\n              required: true,\r\n              message: '请输入您的学号',\r\n              trigger: 'blur'\r\n            },\r\n            {\r\n              min: 7,\r\n              max: 9,\r\n              message: '学号长度不合法',\r\n              trigger: 'blur'\r\n            }\r\n          ],\r\n          name: [{\r\n              required: true,\r\n              message: '请输入你的昵称',\r\n              trigger: 'blur'\r\n            },\r\n            {\r\n              min: 0,\r\n              max: 20,\r\n              message: '昵称长度不合法',\r\n              trigger: 'blur'\r\n            }\r\n          ],\r\n          mail_num: [{\r\n              required: true,\r\n              message: '请输入邮箱地址',\r\n              trigger: 'blur'\r\n            },\r\n            {\r\n              min: 8,\r\n              message: '邮箱地址不合法',\r\n              trigger: 'blur'\r\n            }\r\n          ],\r\n          vali: [{\r\n              required: true,\r\n              message: '请输入验证码',\r\n              trigger: 'blur'\r\n            },\r\n            {\r\n              min: 3,\r\n              message: '验证码不合法',\r\n              trigger: 'blur'\r\n            }\r\n          ],\r\n          password: [{\r\n              required: true,\r\n              message: '请输入密码',\r\n              trigger: 'blur'\r\n            },\r\n            {\r\n              min: 5,\r\n              max: 15,\r\n              message: '密码长度不合法',\r\n              trigger: 'blur'\r\n            }\r\n          ]\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      ...mapMutations('userAbout', {\r\n        saveInfo: 'SAVE'\r\n      }),\r\n      // 用户登录\r\n      login() {\r\n        let submit = {\r\n          \"user\": {\r\n            \"mail_num\": this.loginData.mail_num,\r\n            \"password\": this.loginData.password\r\n          }\r\n        }\r\n        this.$refs.loginForRef.validate(async valid => {\r\n          if (!valid) return\r\n          await this.$http.post(this.baseUrl+'/userlogin', submit).then(res => {\r\n            window.localStorage.setItem('token', res.data.token)\r\n            window.localStorage.setItem('id', res.data.id)\r\n            window.localStorage.setItem('name', res.data.name)\r\n            this.saveInfo()\r\n            this.$message.success({\r\n              message: '登录成功',\r\n              duration: 1000\r\n            })\r\n            this.$router.push('/home')\r\n          }).catch(err => {\r\n            if (err) {\r\n              this.$message.error({\r\n                message: '登录失败',\r\n                duration: 1500\r\n              })\r\n            }\r\n          })\r\n        })\r\n      },\r\n      switchStatus() {\r\n        // 切换界面\r\n        this.isOnLogin = !this.isOnLogin\r\n      },\r\n      // 用户注册并提交验证码\r\n      async register() {\r\n        let key = window.localStorage.getItem('_one_key')\r\n        let submit = {\r\n          \"user\": {\r\n            \"name\": this.registerData.name,\r\n            \"password\": this.registerData.password,\r\n            \"mail_num\": this.registerData.mail_num,\r\n            \"vali\": this.registerData.vali,\r\n            key,\r\n            \"stu_id\": this.registerData.stu_id\r\n          }\r\n        }\r\n        this.$refs.registerForRef.validate(async valid => {\r\n          if (!valid) {\r\n            return\r\n          }\r\n          await this.$http.post(this.baseUrl+'/userregister', submit).then(res => {\r\n            window.localStorage.setItem('token', res.data.token)\r\n            window.localStorage.setItem('id', res.data.id)\r\n            window.localStorage.setItem('name', this.registerData.name)\r\n            this.saveInfo()\r\n            this.$message.success({\r\n              message: '注册成功',\r\n              duration: 2000\r\n            })\r\n            this.$router.push('/home')\r\n          }).catch((err, a) => {\r\n            if (err) {\r\n              this.$message.error({\r\n                message: '注册失败',\r\n                duration: 1500\r\n              })\r\n            }\r\n          })\r\n        })\r\n      },\r\n      // 获取验证码\r\n      async getValidate() {\r\n        this.$refs.registerForRef.validateField('mail_num', async valid => {\r\n          if (valid)\r\n            return\r\n          this.isFreqValidate = !this.isFreqValidate\r\n          // 20s后允许再次请求\r\n          setTimeout(() => {\r\n            this.isFreqValidate = !this.isFreqValidate\r\n          }, 1000 * 20)\r\n          // 获取时间戳来为服务器标识本次验证码的请求时间\r\n          let time = new Date().getTime();\r\n          let data = {\r\n            mail: this.registerData.mail_num,\r\n            timestamp: time\r\n          }\r\n          const res = await this.$http.post(this.baseUrl+'/validateMail', data)\r\n          if (res.status === 200) {\r\n            this.isGetValidate = true\r\n            window.localStorage.setItem('_one_key', res.data)\r\n            this.$message.info({\r\n              message: '验证码发送成功',\r\n              duration: 2000\r\n            })\r\n          } else {\r\n            this.$message.error({\r\n              message: '验证码发送失败',\r\n              duration: 2000\r\n            })\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .link {\r\n    position: absolute;\r\n    bottom: 0;\r\n    left: 50%;\r\n    transform: translate(-50%, 0);\r\n  }\r\n\r\n  .login_container {\r\n    background-image: url('../assets/bookBG.jpg');\r\n    background-repeat: no-repeat;\r\n    background-size: 100% 100%;\r\n    height: 100%;\r\n    user-select: none;\r\n  }\r\n\r\n  .login_box {\r\n    position: relative;\r\n    background-color: rgba(22, 22, 22, 0.322);\r\n    box-shadow: 0 0 1.3rem #aaa;\r\n    padding-top: 2rem;\r\n    padding-left: 3.5rem;\r\n    padding-right: 3.5rem;\r\n    padding-bottom: 5rem;\r\n    border-radius: 1rem;\r\n    width: 25rem;\r\n    height: 15.8rem;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n    text-align: center;\r\n    line-height: 4rem;\r\n  }\r\n\r\n  .register_box {\r\n    position: fixed;\r\n    background-color: rgba(22, 22, 22, 0.322);\r\n    box-shadow: 0 0 1.3rem #aaa;\r\n    padding-top: 1rem;\r\n    padding-left: 6rem;\r\n    padding-right: 6rem;\r\n    padding-bottom: 10rem;\r\n    border-radius: 1rem;\r\n    width: 22rem;\r\n    height: 20.8rem;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n    text-align: center;\r\n    line-height: 4rem;\r\n  }\r\n\r\n  span {\r\n    font-family: 'STHeiti';\r\n    font-size: 1.5rem;\r\n  }\r\n\r\n  .btns {\r\n    padding-top: 1rem;\r\n  }\r\n</style>"]}]}